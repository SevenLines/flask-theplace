{% extends "index.html" %}
{% import "macros.html" as macros %}

{% block menu %}
{#    <div class="navbar-form pull-left">#}
{#        <select style="min-width: 200px" name="query" id="theplace_search_query" class="form-control">#}
{#        </select>#}
{#    </div>#}
{% endblock %}

{% block body %}
    <div class="center-block" style="margin-top:80px;width: 100%;text-align: center">
        <i class="fa fa-spinner fa-pulse fa-5x"></i>
        <h3><small>Loading:</small> <span id="status"></span></h3>
    </div>

    <script>
        var eventSource = new EventSource("{{ url_for("update") }}");

        eventSource.onmessage = function(e) {
          if (e.data == "$done") {
            eventSource.close();
            window.location = "{{ url_for("index") }}"
          } else {
                $("#status").html(e.data);
          }
        };
    </script>
{% endblock %}